Sessions forUNIX and Shell ProgrammingA TextbookBehrouz A. Forouzan and Richard F. GilbergBrooks/Cole Publishing( ISBN 0 534-95159-7)COPYRIGHT (c) 2003 the Wadsworth Group. Brooks/Cole is an imprint of the Wadsworth Group, a division of Thomson Learning, Inc. Thomson Learning(tm) is a trademark used herein under license.============================================================Chapter 16------------------------------------------------------------Session 16.1 Command Substitution$ echo The date and time are: 'date'The date and time are: Mon Aug 6  8:27:25 PDT 2001------------------------------------------------------------Session 16.2 Alias Definition in C Shell % alias dir "echo Gilberg Directory List; ls -l | more"% dirGilberg's Directory Listtotal 30-rw-------    1 gilberg  staff       5782 Sep 10 16:19 TheRaven...-rw-r--r--    1 gilberg  staff        149 Apr 18  2000 teeOut1-rw-r--r--    1 gilberg  staff        149 Apr 18  2000 teeOut2------------------------------------------------------------Session 16.3 Only Argument Position Example % alias fl 'ls -l \!* | more'% fl TheRavenV1-rw-------    1 gilberg  staff        366 Sep  9 19:56 TheRavenV1% fltotal 30-rw-------    1 gilberg  staff       5782 Sep 10 16:19 TheRaven...-rw-r--r--    1 gilberg  staff        149 Apr 18  2000 teeOut2------------------------------------------------------------Session 16.4 alias Command with Two Arguments % ls ~/delete.meNo such file or directory% alias cpto 'cp \!:1 \!:$'alias cpto '\$:1 \$:2'% cpto file1 ~/delete.me% ls -/delete.me/mnt/diska/staff/gilberg/delete.me------------------------------------------------------------Session 16.5 List Alias Example % aliascpto    (cp cpto ~/cp cpto /mnt/diska/staff/gilberg/cp)dir     echo "Gilberg Directory List; ls -l | more"fl      ls -l !* | more------------------------------------------------------------Session 16.6 Removing Aliases in C Shell % unalias fl% aliascpto    (cp cpto ~/cp cpto /mnt/diska/staff/gilberg/cp)dir     echo "Gilberg Directory List; ls -l | more"------------------------------------------------------------Session 16.7 Sending Output to the tty Monitor % ls -l | tee /dev/tty | grep '\.scr$' > temp.filetotal 146-rw-r--r--    1 gilberg  staff         42 Jul 10  2000 ErrFile-rwxr--r--    1 gilberg  staff        111 Jul 11  2000 IFS.scr-rw-r--r--    1 gilberg  staff          0 Jun 11  2000 MidRaven...-rwxr--r--    1 gilberg  staff         36 Jul 31 13:42 who.scr.bak-rwxr--r--    1 gilberg  staff         36 Jul 31 13:45 who.scrBak-rwxr--r--    1 gilberg  staff        112 Jul  5  2000 xxforLoop.scr% cat temp.file-rwxr--r--    1 gilberg  staff        111 Jul 11  2000 IFS.scr-rwxr--r--    1 gilberg  staff        925 Jul 10  2000 addCol.scr-rwxr--r--    1 gilberg  staff        129 Jul  7  2000 backup.scr...-rwxr--r--    1 gilberg  staff        225 Jun 18  2000 variableNum.scr-rwxr--r--    1 gilberg  staff        171 Jul 29 14:12 whileRead.scr-rwxr--r--    1 gilberg  staff         36 Jul  8  2000 who.scr------------------------------------------------------------Session 16.8 Using Values in Strings % set count = 7% echo $count is the number after 6 and before 87 is the number after 6 and before 8% echo The value of count is $count as expected.The value of count is 7 as expected.% echo My lucky number is $count. My lucky number is 7.------------------------------------------------------------Session 16.9 Assigning One Variable to Another % set count = 5% set number = $count% echo count contains: $count; number contains: $numbercount contains: 5; number contains: 5------------------------------------------------------------Session 16.10 Storing a Path in a Variable % set newDir = ~/report/letters% cd $newDir% pwd/usr/forouzan/report/letters------------------------------------------------------------Session 16.11 Null Variables % set x = 1                           #Good assignment% set y =                             #Null assignment% set z = ""                          #Another null assignment% echo "(x:" $x ") (y:" $y") (z:" $z")"(x: 1) (y:) (z:)% set x= ""                           #Clear 'x' by setting to null% echo "(x contains:" $x")"(x contains: )% set x = 1% echo "(x contains:" $x")"(x contains: 1)------------------------------------------------------------Session 16.12) Unsetting Variables % set x = 1% echo "(x contains:" $x")"(x contains: 1)% unset x                       #A better way to clear 'x'% echo "(x contains:" $x")"x - Undefined variable------------------------------------------------------------Session 16.13 Storing Filenames% lsfile1      file2      file3.bak% set filename = "file*"% echo "filename contains: $filename"           #show contentsfilename contains: file*% echo $filenamefile1      file2      file3.bak% set filename = "file?"% echo $filenamefile1      file2------------------------------------------------------------Session 16.14 Storing a File in a String % cat storeAsVar.txtThis is     a             fileused to showthe result        of storing    a file in a            variable.% set x = `cat storeAsVar.txt`% echo $xThis is a file used to show the result of storing a file in a variable.------------------------------------------------------------Session 16.15 Executing a Command Variable % set x = "ls file*"% $xfile.scr      file2         file3.bak     file5         fileOut.rptfile1         file2.bak     file4         file6         fileReportfile1bak      file3         file4.bak     fileList.dat------------------------------------------------------------Session 16.16 Variables Are Not Automatically Exported % set name = George% echo $nameGeorge% csh      % echo $name                       # In child shell% name - Undefined variable------------------------------------------------------------Session 16.17 Exporting Variables % setenv name George	# Create exportable variable% echo $nameGeorge% csh	# First subshell% echo $nameGeorge% csh	# Second subshell% echo $nameGeorge------------------------------------------------------------Session 16.18 Exported Variables Are Separate Entities % setenv name George	# Create exportable variable% echo $nameGeorge% csh	# Subshell% echo $nameGeorge	# name exported % setenv name Jorge	# name changed% echo $nameJorge% exit	# Back to parent% echo $nameGeorge	# name change lost % csh	# Back to subshell% echo $nameGeorge	# Original name exported to new shell------------------------------------------------------------Session 16.19 Exportable and Nonexportable Variables % setenv name Ming% echo $nameMing                            # Exportable variable% set name = Margo% echo $nameMargo                           # Non-exportable variable% csh                           # Create and move to subshell% echo $nameMing                            # Exportable variable % exit                          # Return to parent % echo $nameMargo                           # Non-exportable variable active%------------------------------------------------------------Session 16.20 Using the echo Command % set time = 4:30pm% echo "It is now $time"It is now 4:30pm% echo "It is now" $timeIt is now 4:30pm% echo 'It is now $time'It is now $time                   # Error: $time not expanded------------------------------------------------------------Session 16.21 Demonstrate Selected echo Codes % set w1 = Now% set w2 = Time% echo $w1$w2NowTime% echo $w1'\b'$w2NoTime% echo $w1 "\t\t" $w2Now Time% echo $w1 '\012'$w2              #\012 is octal for newlineNowTime------------------------------------------------------------Session 16.22 Interactive Read % set x = $<This is a line.% echo $xThis is a line.------------------------------------------------------------Session 16.23 Demonstrate Exit Status% ls file*file1      file2      file3.bak% echo $status0% ls noneCannot access none: No such file or directory% echo $status2------------------------------------------------------------Session 16.24 Wrong Way to Use a Variable in a Variable % set x = 23% set y = x                  # Store name of variable in y% echo $yx                            # Name of variable, not its value------------------------------------------------------------Session 16.25 Another Wrong Way to Use a Variable in a Variable % set x = 23% set y = x                  # Store name of variable in y% echo \$$y $x                           # Still not x's value------------------------------------------------------------Session 16.26 Correct Way to Use a Variable in a Variable % set x = 23% set y = x                  # Store name of variable in y% eval echo \$$y23 ------------------------------------------------------------Session 16.27 Variable Command Error % set list = "ls -l | head -4"% $listCannot access |: No such file or directoryCannot access head: No such file or directoryCannot access -4: No such file or directory------------------------------------------------------------Session 16.28 Evaluating a Multicommand Variable % set list = "ls -l | head -4"% eval $listOutput:total 155-rw-r--r--    1 gilberg  staff         42 Jul 10  2000 ErrFile-rwxr--r--    1 gilberg  staff        111 Jul 11  2000 IFS.scr-rw-r--r--    1 gilberg  staff          0 Jun 11  2000 MidRaven------------------------------------------------------------Session 16.29 Set CDPATH % echo $CDPATH    CDPATH - Undefined variable% setenv CDPATH " $HOME /bin/usr/files"% echo $CDPATH /mnt/diska/staff/gilberg /bin/usr/files------------------------------------------------------------Session 16.30 Demonstrate Change Home Directory % echo $HOME/mnt/diska/staff/gilberg% set oldHOME=$HOME% echo $oldHOME/mnt/diska/staff/gilberg% setenv HOME `pwd`% echo $HOME/mnt/diska/staff/gilberg/unix20csh% setenv HOME $oldHOME% echo $HOME/mnt/diska/staff/gilberg------------------------------------------------------------Session 16.31 The USER Variable % echo $USERgilberg------------------------------------------------------------Session 16.32 The mail Variable % echo $mail/usr/mail/forouzan------------------------------------------------------------Session 16.33 Change the Primary Prompt % set prompt = "C: "C: echo $promptC:C: set prompt = "% "%------------------------------------------------------------Session 16.34  The Secondary Prompt  $ echo "Now? is? the? time"Nowisthetime------------------------------------------------------------Session 16.35 The SHELL Variable % echo $SHELL/bin/csh------------------------------------------------------------Session 16.36 The TERM Variable % echo $TERMvt100------------------------------------------------------------Session 16.37 No Global Option Off% ls file?file1  file2  file3  file4  file5  file6  file?------------------------------------------------------------Session 16.38 No Global Option On% ls file?file?------------------------------------------------------------Session 16.39 The history Command % history238     hold239     history...251     cp mail_file mail_file.bak252     pico mail_file253     history------------------------------------------------------------Session 16.40 Specify Start Line for the history Command $ history 5251     cp mail_file mail_file.bak252     pico mail_file253     history254     history -n255     history 5------------------------------------------------------------Session 16.41 Using the Pathname Modifiers % ls /usr/staff/joan/files/file1.txt-rw-------    1 joan     staff       5782 Jul 21 19:23 file1.txt % cd !$:h                            # use head from previous command% cd /usr/staff/joan/files% ls !-2:t                           # use tail from second previous % ls file1.txt-rw-------    1 joan     staff       5782 Jul 21 19:23 file1.txt% ls !$:r.bak                        # use root from previous command% ls file1.bak-rw-------    1 joan     staff       5782 Jun 30 15:05 file1.bak