Sessions forUNIX and Shell ProgrammingA TextbookBehrouz A. Forouzan and Richard F. GilbergBrooks/Cole Publishing( ISBN 0 534-95159-7)COPYRIGHT (c) 2003 the Wadsworth Group. Brooks/Cole is an imprint of the Wadsworth Group, a division of Thomson Learning, Inc. Thomson Learning(tm) is a trademark used herein under license.============================================================Chapter 3------------------------------------------------------------Session 3.1. Echo Filenames Using Wildcard$ echo f?tf-t f1t fat fbt fgt fwt------------------------------------------------------------Session 3.2  inode List $ ls -ai79944 .              79887 DirE           79937 file1    80925 ..             79942 backUpDir      79872 lnDir79965 DirA           79906 backUpDir.mt   79871 mvDir------------------------------------------------------------Session 3.3. Print Working Directory$ pwd/usr/~gilberg/tran------------------------------------------------------------Session 3.4. Basic List Directory$ lsBST.c      aFile      file1      memo509    saturn     zFileBST.h      binSrch.c  gnuFile    note311    statusRpt------------------------------------------------------------Session 3.5. List All Option$ ls -a ~.                    .mailrc              file2..                   .profile             mail.forward             .sh_history          mail.instr.desktop-cis-b12     C-Programs           mail.staff.ids.history             f-files              manVi.login               file.c               status.lsignature          file.bin       ------------------------------------------------------------Session 3.6  List Directory Option$ ls -lddrwxr-xr-x   14 gilberg  staff       3584 May 17 15:17 .------------------------------------------------------------Session 3.7  List User and Group IDs$ ls -nddrwxr-xr-x    2 3988     24           512 May 17 08:53 .------------------------------------------------------------Session 3.8 List Directory in Reverse Order$ ls -rzFile      saturn     memo509    file1      aFile      BST.cstatusRpt  note311    gnuFile    binSrch.c  BST.h------------------------------------------------------------Session 3.9 List Directory in Basic Time Sequence$ ls -lttotal 12-rw-r--r--    1 gilberg  staff       14 May 19 13:33 file1drwxr-xr-x    2 gilberg  staff      512 May 19 13:29 memos-rw-r--r--    1 gilberg  staff       15 May 18 18:17 zFile-rw-r--r--    1 gilberg  staff       15 May 18 18:16 aFile.tmp------------------------------------------------------------Session 3.10  List Directory-Identify Directories$ ls -pBST.c       binSrch.c   memo509     saturn      zFileBST.h       file1       memos/      statusRptaFile.tmp   gnuFile     note311     unix7.1/------------------------------------------------------------Session 3.11 Recursive List$ ls -Rpfile1      file2      techNotes/  unix7.1/./techNotes:personal/  sort.doc   vi.doc./techNotes/personal:profile.doc./unix7.1/BST.c       file7.1     memos/      srch.cBST.h       gnuFile     saturn      zFile./unix7.1/memos:dick318     statusRpt   tran407------------------------------------------------------------Session 3.12 Print One Column$ ls -1BST.cBST.haFile.tmpzFile------------------------------------------------------------Session 3.13 Print inode Number$ ls -li file1 zFile37585 -rw-r--r--    1 gilberg  staff         14 May 17 16:32 file133809 -rw-r--r--    1 gilberg  staff         15 May 18 18:17 zFile------------------------------------------------------------Session 3.14 Make Directory$ mkdir saturnGp$ ls -ld saturnGpdrwxr-xr-x    2 gilberg  staff        512 May 19 14:03 saturnGp------------------------------------------------------------Session 3.15 Make Directory in Path$ mkdir -p saturnGp/memos/schedule$ ls -lR saturnGptotal 1drwxrwxr-x    3 gilberg  staff       512 May 19 14:17 memossaturnGp/memos:total 1drwxrwxr-x    2 gilberg  staff       512 May 19 14:17 schedulesaturnGp/memos/schedule:total 0------------------------------------------------------------Session 3.16 Change Directory$ pwd/usr/~gilberg$ cd saturnGp$ pwd/usr/~gilberg/saturnGp------------------------------------------------------------Session 3.17 Change Directory with Home Reference$ cd ~/saturnGp/memos/schedule$ pwd/usr/~gilberg/saturnGp/memos/schedule------------------------------------------------------------Session 3.18  Remove Directory$ rmdir memosmemos: Directory not empty$ rmdir memo------------------------------------------------------------Session 3.19 Sample more Output$ more -ds -6 +49 TheRavenThen this ebony bird beguiling my sad fancy into smiling,By the grave and stern decorum of the countenance it wore,"Though thy crest be shorn and shaven, thou," I said, "art sure no craven,Ghastly grim and ancient Raven wandering from the Nightly shore--Tell me what thy lordly name is on the Night's Plutonian shore!"Quoth the Raven, "Nevermore."--More--(46%)------------------------------------------------------------Session 3.20 Specifying Start Line in more $ more -df -7 +/"crest be shorn" TheRavenThen this ebony bird beguiling my sad fancy into smiling,By the grave and stern decorum of the countenance it wore,"Though thy crest be shorn and shaven, thou," I said, "art sure no craven,Ghastly grim and ancient Raven wandering from the Nightly shore--Tell me what thy lordly name is on the Night's Plutonian shore!"Quoth the Raven, "Nevermore."TheRaven (44%)------------------------------------------------------------Session 3.21. SESSION 3.1 Copy File to Same Directory$ ls -l f*-rw-r--r--    1 gilberg  staff        120 May 25 15:10 file1$ cp file1 file2$ ls -l f*-rw-r--r--    1 gilberg  staff        120 May 25 15:10 file1-rw-r--r--    1 gilberg  staff        120 May 25 17:02 file2------------------------------------------------------------Session 3.22 Copy and Replace File$ ls -l f*-rw-r--r--    1 gilberg  staff        120 May 25 15:10 file1-rw-------    1 gilberg  staff        120 May 25 17:02 file2$ cp file1 file2$ ls -l f*-rw-r--r--    1 gilberg  staff        120 May 25 15:10 file1-rw-------    1 gilberg  staff        120 May 25 17:08 file2------------------------------------------------------------Session 3.23. Copy File to a Directory from Home$ ls -l DirBtotal 0$ cp DirA/file1 DirB$ ls -l DirBtotal 1-rw-r--r--    1 gilberg  staff        120 May 27 10:38 file1------------------------------------------------------------Session 3.24 Copy File to Different Directory$ ls -l ~/DirBtotal 0$ cp file1 ~/DirB/file2$ ls -l ~/DirBtotal 1-rw-r--r--    1 gilberg  staff        120 May 27 10:46 file2------------------------------------------------------------Session 3.25 Preserve Attributes Option$ ls -ltotal 2-rw-r--r--    1 gilberg  staff        120 May 25 15:46 file1-rw-------    1 gilberg  staff        120 May 27 11:03 file2$ cp -p file1 file2$ ls -ltotal 2-rw-r--r--    1 gilberg  staff        120 May 25 15:46 file1-rw-r--r--    1 gilberg  staff        120 May 25 15:46 file2------------------------------------------------------------Session 3.26 Interactive Option$ cp -i file1 file2UX:cp: overwrite file2? (yes/no)[no] : yepUX:cp: overwrite file2? (yes/no)[no] : y------------------------------------------------------------Session 3.27 Example of Recursive Copy$ lsDirA$ ls DirBCannot access DirB: No such file or directory$ cp -r DirA DirB$ lsDirA   DirB$ ls DirBfile1  file2------------------------------------------------------------Session 3.28 Recursive Copy with Subdirectories$ ls -R DirCDirC1  DirC2DirC/DirC1:file3DirC/DirC2:file4$ ls -R DirD$$ cp -r DirC DirD$ ls -R DirDDirDDirD/DirC:DirC1  DirC2DirD/DirC/DirC1:file3DirD/DirC/DirC2:file4------------------------------------------------------------Session 3.29 Wildcard Copy$ ls DirB$$ cp DirA/f* DirB$ ls DirBfile1  file2------------------------------------------------------------Session 3.30 Move File$ ls -i DirA/file179915 DirA/file1$ ls -i DirB$$ mv DirA/file1 DirB$ ls -i DirA$$ ls -i DirB79915 file1------------------------------------------------------------Session 3.31  Using the Interactive Flag to Prevent Move Errors$ ls mvDirfile1  gilbergfile3$ mv -i file1 mvDiroverwrite mvDir/file1? (yes/no)[no] : n------------------------------------------------------------Session 3.31 Force Replacement with Move Command$ ls -l mvDirtotal 2-rw-r--r--    1 gilberg  staff        120 Sep 19 11:40 file1-rw-r--r--    1 gilberg  staff        120 Sep 19 11:40 file3$ mv -f file1 mvDir$ ls -l mvDirtotal 2-rw-r--r--    1 gilberg  staff        120 Oct 28 16:06 file1-rw-r--r--    1 gilberg  staff        120 Sep 19 11:40 file3------------------------------------------------------------Session 3.33 A Simple Move (Rename)$ ls -i file*79914 file1  79937 file2$ mv file1 file0$ ls -i file*79914 file0  79937 file2 ------------------------------------------------------------Session 3.34  Using the Interactive Flag to Prevent Errors$ ls lnDirfile2       linkedFile$ ln -i file2 lnDiroverwrite lnDir/file2? (yes/no)[no] : n------------------------------------------------------------Session 3.35 Force Write$ ls -l lnDirtotal 2lrwxr-xr-x    1 gilberg  staff          5 May 28 15:39 file2 -> file2-rw-r--r--    2 gilberg  staff        120 May 25 15:10 linkedFile$ ln -f file2 lnDir$ ls -l lnDirtotal 2-r--r--r--    2 gilberg  staff        120 May 25 17:08 file2-rw-r--r--    2 gilberg  staff        120 May 25 15:10 linkedFile------------------------------------------------------------------------------------------------------Session 3.36  Create Hard Link Demonstration$ ls lnDir$$ ln file1 lnDir/linkedFile$$ ls -i file179914 file1$ ls -i lnDir/linkedFile79914 lnDir/linkedFile ------------------------------------------------------------Session 3.37  Link to Existing File$ ln file2 lnDir/linkedFileMay not unlink existing lnDir/linkedFile  - Error 0$ ln -f file2 lnDir/linkedFile$ ls -i file279937 file2$ ls -i lnDir/linkedFile79937 lnDir/linkedFile------------------------------------------------------------Session 3.38  Symbolic Link Demonstration $ ls lnDirlinkedFile$ ln -s file2 lnDir$ ls -i file279937 file2$ ls -il lnDirtotal 279898 lrwxr-xr-x   1 gilberg  ...     5 May 28 15:39 file2 -> file279914 -rw-r--r--   2 gilberg  ...   120 May 25 15:10 linkedFile------------------------------------------------------------Session 3.39 Symbolic Link to Directory$ ls -il DirC                  # From parent, List DirCtotal 279917 drwxr-xr-x    2 gilberg  staff    512 Aug 29 12:03 DirC179961 drwxr-xr-x    2 gilberg  staff    512 May 27 11:40 DirC2$ ln DirC1 hardDir             # Try to create a hard link to directoryCannot link directory DirC1    # Fails--Cannot create hard link$ ls symDir                    # Verify that there's no symDirCannot access symDir: No such file or directory$ ln -s DirC symDir            # Create symbolic link for symDir$ # We have now created a symbolic directory as verified by inodes$ ls -il symDir                # Show symDir is symbolic link to DirC79914 lrwxr-xr-x    1 gilberg  staff      4 Sep 18 21:53 symDir -> DirC$ cd symDir                    # Move to newly created symDir$ ls -il                       # Verify its contents same as DirCtotal 279917 drwxr-xr-x    2 gilberg  staff    512 Aug 29 12:03 DirC179961 drwxr-xr-x    2 gilberg  staff    512 May 27 11:40 DirC2------------------------------------------------------------Session 3.40 Remove (Delete)$ ls -l file2-r--r--r--    2 gilberg  staff        120 May 25 17:08 file2$ rm file2file2: 444 mode. Remove ? (yes/no)[no] : y$ ls -l file2Cannot access file2: No such file or directory------------------------------------------------------------Session 3.41 Recursive Removal$ ls -Rl delRecDirtotal 4drwxr-xr-x    2 gilberg  staff        512 May 29 11:44 DirAdrwxr-xr-x    2 gilberg  staff        512 May 29 11:44 DirBdrwxr-xr-x    2 gilberg  staff        512 May 29 11:44 emptyDir-r--r--r--    1 gilberg  staff        120 May 29 11:44 file1delRecDir/DirA:total 2-rw-r--r--    1 gilberg  staff        120 May 29 11:44 file2-rw-r--r--    1 gilberg  staff        120 May 29 11:44 file3delRecDir/DirB:total 2-rw-r--r--    1 gilberg  staff        120 May 29 11:44 file4-rw-r--r--    1 gilberg  staff        120 May 29 11:44 file5delRecDir/emptyDir:delRecDir/emptyDir:total 0$ rm -r delRecDirdelRecDir/file1: 444 mode. Remove ? (yes/no)[no] : y$ ls delRecDirCannot access delRecDir: No such file or directory------------------------------------------------------------Session 3.42  Using echo to Preview Effects of Remove$ echo rm -r f*rm -r file1 file2 file2.bak file2.sym$ rm -r file2.bak file2.sym------------------------------------------------------------Session 3.43 find Address of File$ find DirC -name file3 -printDirC/DirC1/file3------------------------------------------------------------------------------------------------------Session 3.44 find Command$ find DirC -type f -mtime -30DirC/file1DirC/DirC1/file2DirC/DirC2/file3------------------------------------------------------------Session 3.45 Find and Backup$ ls backUpDir$$ find DirC -type f -mtime -30DirC/file1DirC/DirC1/file2DirC/DirC2/file3$ find DirC -type f -mtime -30 -exec cp {} backUpDir ;$ ls backUpDirfile1  file2  file3------------------------------------------------------------Session 3.46 Find and Backup with Okay$ ls mvDir$$ find DirC -type f -mtime -30 -ok cp {} mvDir \;< cp ... DirC/file1 >?   y< cp ... DirC/DirC1/file2 >?   n< cp ... DirC/DirC2/file3 >?   y$ ls mvDirfile1  file3------------------------------------------------------------Session 3.47 Find Permissions-Or Criteria Example$ ls -l DirEtotal 4-rw-r--r--    1 gilberg  staff        120 May 29 13:47 file1-r-xr-xr-x    1 gilberg  staff        120 May 29 13:47 file2-r--r--r--    1 gilberg  staff        120 May 29 13:47 file3-rw-rw-rw-    1 gilberg  staff        120 May 29 13:47 file4$ find DirE \( -perm -444 -o -perm -555 ')'  -exec ls -l {} ";"-r-xr-xr-x    1 gilberg  staff        120 May 29 13:47 DirE/file2-r--r--r--    1 gilberg  staff        120 May 29 13:47 DirE/file3------------------------------------------------------------Session 3.48 Find Newer-And Criteria Example$ ls -l file1-rw-r--r--    2 gilberg  staff        120 May 25 15:10 file1$ find . -name file1 -newer file1 -exec ls -l {} \;-rw-r--r--    1 gilberg  staff        120 May 25 15:46 ./DirA/file1-rw-r--r--    1 gilberg  staff        120 May 27 15:49 ./DirB/file1-rw-r--r--    1 gilberg  staff        120 May 29 13:15 ./DirC/file1